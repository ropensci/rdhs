<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Running test suite locally • rdhs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Running test suite locally">
<meta property="og:description" content="rdhs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rdhs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.7.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/introduction.html">Introduction</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">Introduction to rdhs (Overview)</a>
    </li>
    <li>
      <a href="../articles/anemia.html">An example use case looking at trends in anemia</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="../articles/client.html">How to use the client</a>
    </li>
    <li>
      <a href="../articles/geojson.html">How to use geojson API results</a>
    </li>
    <li>
      <a href="../articles/boundaries.html">How to download shape files</a>
    </li>
    <li>
      <a href="../articles/country_codes.html">Country Codes</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="../CONTRIBUTING.html">Contributing</a>
    </li>
    <li>
      <a href="../articles/toolkit.html">Installation</a>
    </li>
    <li>
      <a href="../articles/testing.html">Testing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/rdhs" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Running test suite locally</h1>
                        <h4 data-toc-skip class="author">OJ Watson</h4>
            
            <h4 data-toc-skip class="date">2018-07-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/rdhs/blob/HEAD/vignettes/testing.Rmd" class="external-link"><code>vignettes/testing.Rmd</code></a></small>
      <div class="hidden name"><code>testing.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The following is a guide describing how to be able to run the full
test suite locally.</p>
<hr>
</div>
<div class="section level2">
<h2 id="creating-an-account-with-the-dhs-website">1. Creating an account with the DHS website<a class="anchor" aria-label="anchor" href="#creating-an-account-with-the-dhs-website"></a>
</h2>
<p>In order to run all the tests in the <em>rdhs</em> package you need
to have created an account with the DHS website. This requires about 5
mins to fill in their form and then a few days for them to approve your
account creation. To start this head to the DHS website and go to the
Data tab <a href="https://dhsprogram.com/data/dataset_admin/login_main.cfm" class="external-link">here</a>.
A full rationale for this process can be found on their website <a href="https://dhsprogram.com/data/Access-Instructions.cfm" class="external-link">here</a>. In
short you provide your contact information and then describe the study
you are conducting that requires the DHS survey datasets.</p>
<p>Importantly, when filling in their form describing the description of
your study be sure to include some mention of needing geographic
datasets as a number of the tests download geographic datasets. After
you have filled this in you need to specify which countries and datasets
you need. In order for the full test suite to work you must request
every country and dataset type possible. After you have done this the
DHS programme will take a few days to approve you request and will then
email you to let you know at the email address you have provided.</p>
</div>
<div class="section level2">
<h2 id="setting-up-your-rdhs-config">2. Setting up your rdhs config<a class="anchor" aria-label="anchor" href="#setting-up-your-rdhs-config"></a>
</h2>
<p>Having now created your account, you can set up your <em>rdhs</em>
configuration, which will allow you to download datasets from their
website. This will also enable the tests included in “test_downloads.R”,
“test_extraction.R” and “test_ui.R” to run, as these tests first check
for an rdhs config file (“rdhs.json”) within the testing directory.</p>
<p>After having cloned/downloaded the repository, you will need to set
up your rdhs config file within the testing directory, after which you
should be able to run the test suite in full.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkg_dir</span> <span class="op">&lt;-</span> <span class="st">"C:/Users/Oliver/GoogleDrive/AcademicWork/Imperial/git/rdhs"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">pkg_dir</span>,<span class="st">"tests/testthat/"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">rdhs</span><span class="fu">::</span><span class="fu"><a href="../reference/set_rdhs_config.html">set_rdhs_config</a></span><span class="op">(</span>email <span class="op">=</span> <span class="st">"rdhs.tester@gmail.com"</span>,</span>
<span>                      project <span class="op">=</span> <span class="st">"Testing Malaria Investigations"</span>, </span>
<span>                      config_path <span class="op">=</span> <span class="st">"rdhs.json"</span>, </span>
<span>                      global <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># devtools::test(pkg_dir)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by OJ Watson, Jeff Eaton.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
